<html>
    <title>Generics Test</title>
    <body>
        <script src="p5.js"></script>
        <script src="generic.js"></script>
        <script>
            var lines;
            var firstClick;
            var secondClick;
            var firstClickCircle;
            var tempLine;
            var circleColor;

            function preload() {
                lines = [];
                circleColor = new generic.RGB(200, 20, 10);
                firstClick  = null;
                secondClick = null;
            }

            function setup() {
                createCanvas(windowWidth, windowHeight);
            }

            function draw() {
                background(145);
                var i;
                for(i = 0; i < lines.length; i++) {
                    lines[i].draw();
                }   
                if(firstClickCircle) firstClickCircle.draw();
                if(tempLine) tempLine.draw();
                if(firstClick) {
                    tempLine = new generic.Line(firstClick, 
                                new generic.Vector2(mouseX, mouseY),
                                new generic.RGB(200, 20, 10));
                }
            }

            function mousePressed() {
                if(firstClick) {
                    secondClick = new generic.Vector2(mouseX, mouseY);
                    var line = new generic.Line(firstClick, secondClick);
                    lines.push(line);
                    firstClick = null;
                    secondClick = null;
                    tempLine = null;
                    firstClickCircle = null;
                } else {
                    firstClick = new generic.Vector2(mouseX, mouseY);
                    firstClickCircle = new generic.Circle(firstClick, 
                                                          17, 
                                                          circleColor);
                }
            }
        </script>
    </body>
</html>